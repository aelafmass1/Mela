version: 0.2

phases:
  install:
    runtime-versions:
      java: openjdk11
      nodejs: 16
    commands:
      - echo Using pre-installed OpenJDK 11 and Node.js 16
  build:
    commands:
      - echo Building Flutter APK...
      - git clone https://github.com/flutter/flutter.git -b stable
      - export PATH="$PATH:`pwd`/flutter/bin"
      - flutter doctor
      - flutter precache
      - flutter clean
      - flutter build apk --release
  post_build:
    commands:
      - echo Build complete.

artifacts:
  files:
    - build/app/outputs/flutter-apk/app-release.apk
  discard-paths: no